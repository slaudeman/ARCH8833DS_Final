<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="./index.css">
</head>

<body>

<aside>

    <hr>
    <ul>

        <li><a href="#"><img src="images/save.png" width="50" height="50"></a></li>
        <li><a href="#"><img src="images/load.png" width="50" height="50"></a></li>
        <li><a href="rect.html"><img src="images/rect.png" width="50" height="50"></a></li>
        <li><a href="#"><img src="images/triangle.png" width="50" height="50"></a></li>
        <li><a href="circle.html"><img src="images/circle.png" width="50" height="50"></a></li>
        <li><a href="#"><img src="images/line.png" width="50" height="50"></a></li>
        <li><a href="#"><img src="images/floor.png" width="50" height="50"></a></li>
        <li><a href="#"><img src="images/delete.png" width="50" height="50"></a></li>

    </ul>
</aside>


<main>
    <style>
  .active {
    stroke: #000;
    stroke-width: 2px;
  }
</style>
    <svg id="mySvg" width="960" height="500">
    </svg>



    <script src="https://d3js.org/d3.v4.min.js"></script>

    <script>


var svg = d3.select("svg"),
    width = +svg.attr("width"),
    height = +svg.attr("height"),
    radius = 70;

  var data = [{
      x: 100,
      y: 200
    }];







  var xScale = d3.scaleLinear()
    .domain([0, d3.max(data, function(d) {
      return d.x_pos
    })]).range([0, width]);

  svg.selectAll("circle")
    .data(data)
    .enter().append("circle")
    .attr("cx", function(d) {
      return d.x;
    })
    .attr("cy", function(d) {
      return d.y;
    })
    .attr("r", radius)
    .style("fill", "lightblue")
    .attr('id', function(d, i) {
      return 'rect_' + i;
    })
    .call(d3.drag()
      .on("start", dragstarted)
      .on("drag", dragged)
      .on("end", dragended))
    .on("click", removeElement);

  svg.on("click", function() {
    var coords = d3.mouse(this);

    var newData = {
      x: d3.event.x,
      y: d3.event.y
    };

    data.push(newData);

    svg.selectAll("circle") // For new circle, go through the update process
      .data(data)
      .enter()
      .append("circle")
      .attr("cx", function(d) {
        return d.x;
      })
      .attr("cy", function(d) {
        return d.y;
      })
      .attr("r", radius)
      .style("fill", "red")
      .attr('id', function(d, i) {
        return 'circle_' + i;
      })
      .call(d3.drag()
        .on("start", dragstarted)
        .on("drag", dragged)
        .on("end", dragended));

  })

  function dragstarted(d) {
    d3.select(this).raise().classed("active", true);
  }

  function dragged(d) {
    d3.select(this)
      .attr("cx", d.x = d3.event.x)
      .attr("cy", d.y = d3.event.y);
  }

  function dragended(d) {
    d3.select(this)
      .classed("active", false);
  }


    </script>


</main>

<script
        type="text/javascript"
        src="interaction.js">
</script>



</body>

</html>
